TEST SUITE REPORT - 2025-11-17 00:32:03
=================================================

RESULTADOS:
- Tests Unitarios: FAIL
- Tests IntegraciÃ³n: FAIL
- Tests End-to-End: FAIL

Tiempo total: 0.25 segundos

=================================================

DETALLES:

UNIT TESTS:


================================================================================
              TESTS UNITARIOS - Sistema de Boletas ElectrÃ³nicas              
================================================================================



Test 1: Control de Folios
-------------------------

  âœ… PASS: Leer folio desde archivo (Folio: 1910)
  âœ… PASS: Validar folio en rango CAF (1889-1988) (1910 estÃ¡ en rango [1889, 1988])
  âœ… PASS: Incrementar folio (1910 â†’ 1911)


Test 2: CÃ¡lculo de Totales
---------------------------

  âœ… PASS: Calcular IVA (19%) (Neto: 100000 â†’ IVA: 19000)
  âœ… PASS: Calcular Total (Neto + IVA) (Total: 119000)
  âœ… PASS: Calcular Neto desde Total con IVA (Total: 119000 â†’ Neto: 100000)
  âœ… PASS: Sumar mÃºltiples items (Total items: 50000)


Test 3: ValidaciÃ³n de RUT
--------------------------

  âœ… PASS: Validar formato RUT: 76063822-6 (76063822-6)
  âœ… PASS: Validar formato RUT: 78274225-6 (78274225-6)
  âœ… PASS: Validar formato RUT: 66666666-6 (66666666-6)
  âœ… PASS: Validar formato RUT: 11111111-1 (11111111-1)
  âœ… PASS: Validar formato RUT: 12345678-5 (12345678-5)


Test 4: Formato de Fecha
------------------------

  âœ… PASS: Fecha en formato ISO (Y-m-d) (2025-11-17)
  âœ… PASS: Convertir timestamp a fecha (2025-11-17)
  âœ… PASS: Validar fecha vÃ¡lida (2025-11-17 es vÃ¡lida)


Test 5: ConversiÃ³n de Encoding UTF-8 â†’ ISO-8859-1
----------------------------------------------------

  âœ… PASS: Convertir: NÂ° (OK (length: 2))
  âœ… PASS: Convertir: ELECTRÃ“NICA (OK (length: 11))
  âœ… PASS: Convertir: Ã‘uÃ±oa (OK (length: 5))
  âœ… PASS: Convertir: JosÃ© MarÃ­a (OK (length: 10))
  âœ… PASS: Convertir: PeÃ±alolÃ©n (OK (length: 9))


Test 6: Formato de Montos
-------------------------

  âœ… PASS: Formatear con separador de miles ($1.234.567)
  âœ… PASS: Formatear sin decimales (150000)


Test 7: Estructura XML
----------------------

  âœ… PASS: Crear estructura XML bÃ¡sica (XML vÃ¡lido)
  âœ… PASS: Acceder a nodos XML (Folio: 1909)
  âœ… PASS: Validar encoding ISO-8859-1 (Encoding correcto)


Test 8: ValidaciÃ³n de CAF
--------------------------

  âŒ FAIL: Archivo CAF existe (/home/user/archivos/tests/../folios/folio_39.xml)



================================================================================
                          RESUMEN DE TESTS UNITARIOS                          
================================================================================


  â€¢ Total tests â†’ 26
  â€¢ Pasados â†’ 25 âœ…
  â€¢ Fallados â†’ 1 âŒ
  â€¢ Porcentaje â†’ 96.15%

  âœ—  Hay 1 tests que fallaron

  Tests fallados:
    â€¢ Archivo CAF existe



INTEGRATION TESTS:


================================================================================
           TESTS DE INTEGRACIÃ“N - Sistema de Boletas ElectrÃ³nicas           
================================================================================



Test 1: GeneraciÃ³n de DTE Completo
-----------------------------------

  âœ… PASS: Construir estructura de documento DTE
  âœ… PASS: Validar coherencia de totales (100000 + 19000 = 119000)


Test 2: GeneraciÃ³n de PDF
--------------------------

  âœ… PASS: Generar PDF con datos completos (PDF creado: 3176 bytes)
  âœ… PASS: Validar tamaÃ±o del PDF (TamaÃ±o: 3176 bytes)
  âœ… PASS: Validar formato PDF (Signature: %PDF-1.3)


Test 3: GeneraciÃ³n de Timbre PDF417
------------------------------------

  âŒ FAIL: Generar cÃ³digo PDF417 (Timbre creado)


Test 4: IntegraciÃ³n Folios y CAF
---------------------------------

  âœ… PASS: Leer folio desde archivo (Folio actual: 1910)
  âŒ FAIL: Cargar archivo CAF (CAF cargado)


Test 5: IntegraciÃ³n XML â†’ PDF
--------------------------------

  âœ… PASS: Crear XML de DTE
  âœ… PASS: Guardar XML en archivo (XML guardado)
  âœ… PASS: Generar PDF desde XML guardado


Test 6: ConexiÃ³n con Simple API
--------------------------------

  âœ… PASS: Certificado digital existe (/home/user/archivos/tests/../16694181-4.pfx)
  âœ… PASS: API Key configurada (Key: 9794-N370-...)
  âœ… PASS: Conectividad con Simple API (HTTP Code: 503)



================================================================================
                       RESUMEN DE TESTS DE INTEGRACIÃ“N                       
================================================================================


  â€¢ Total tests â†’ 14
  â€¢ Pasados â†’ 12 âœ…
  â€¢ Fallados â†’ 2 âŒ
  â€¢ Porcentaje â†’ 85.71%

  âœ—  Hay 2 tests que fallaron



E2E TESTS:


================================================================================
             TESTS END-TO-END - Sistema de Boletas ElectrÃ³nicas             
================================================================================


  â„¹  Modo: Sin envÃ­o real al SII (solo validaciÃ³n local)


FLUJO END-TO-END COMPLETO
-------------------------


â•â•â• PASO 1: Obtener Folio â•â•â•
  âœ… Leer y asignar folio â†’ Folio: 1910

â•â•â• PASO 2: Construir Documento DTE â•â•â•
  âœ… Construir datos del documento

â•â•â• PASO 3: OMITIDO (modo sin envÃ­o) â•â•â•

â•â•â• PASO 4: Guardar XML del DTE â•â•â•
  âœ… Guardar XML en archivo â†’ Guardado en: /home/user/archivos/tests/../xmls/boleta_test_e2e.xml

â•â•â• PASO 5: Generar PDF con Timbre â•â•â•
  âœ… Generar PDF de la boleta â†’ PDF: 3370 bytes

â•â•â• PASO 6: Validar PDF Generado â•â•â•
  âœ… Validar estructura del PDF
  âœ… Validar encoding en PDF (sin caracteres corruptos) â†’ Encoding correcto

â•â•â• PASO 7: Limpiar Archivos de Prueba â•â•â•
  âœ… Eliminar archivos temporales de test

â•â•â• FLUJO COMPLETO â•â•â•
  1. âœ“ Folio asignado
  2. âœ“ Documento construido
  3. âŠ˜ DTE firmado (omitido)
  4. âœ“ XML guardado
  5. âœ“ PDF generado
  6. âœ“ PDF validado
  7. âœ“ Limpieza



================================================================================
                         RESUMEN DE TESTS END-TO-END                         
================================================================================


  â€¢ Total tests â†’ 7
  â€¢ Pasados â†’ 7 âœ…
  â€¢ Fallados â†’ 0 âŒ
  â€¢ Porcentaje â†’ 100%

  âœ“  Â¡Flujo end-to-end completado exitosamente! ğŸ‰


